{
  "name": "verifyMissingClientAgreementTGd()",
  "id": "[engine:junit-jupiter]/[class:com.edwardjones.platform_ui_tests.testcases.IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement]/[method:verifyMissingClientAgreementTGd()]",
  "scenarioId": "[engine:junit-jupiter]/[class:com.edwardjones.platform_ui_tests.testcases.IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement]",
  "testCaseName": "com.edwardjones.platform_ui_tests.testcases.IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement",
  "methodName": "verifyMissingClientAgreementTGd",
  "testSteps": [
    {
      "number": 1,
      "description": "Retrieve data from DB2: EJ account, ownership ruleID\u003d313, branch \u003cnull\u003e, ACCT_SVC_TY_CD GD, ACCT_SVC_STAT_CD T",
      "duration": 65285,
      "startTime": "2025-10-06T10:33:22.186595053-05:00[America/Chicago]",
      "screenshots": [
        {
          "screenshot": "c5741956fe0ffb42c18c5107d186dbe76698d1e8192c97e6d3eeef21d9df1f94.png",
          "htmlSource": "pagesource1793343166011457363.html",
          "timeStamp": 1759764867470,
          "screenshotName": "c5741956fe0ffb42c18c5107d186dbe76698d1e8192c97e6d3eeef21d9df1f94.png"
        }
      ],
      "exception": {
        "errorType": "com.edwardjones.database.exceptions.DbDataIsNotRetrievedException",
        "message": "Error in reading data from DB2",
        "stackTrace": [
          {
            "declaringClass": "com.edwardjones.database.helpers.Db2Helper",
            "methodName": "getResultSet",
            "fileName": "Db2Helper.java",
            "lineNumber": 69
          },
          {
            "declaringClass": "com.edwardjones.database.dataproviders.base.BaseTestDataProvider",
            "methodName": "readDb2Data",
            "fileName": "BaseTestDataProvider.java",
            "lineNumber": 119
          },
          {
            "declaringClass": "com.edwardjones.database.dataproviders.base.BaseTestDataProvider",
            "methodName": "readDb2Data",
            "fileName": "BaseTestDataProvider.java",
            "lineNumber": 106
          },
          {
            "declaringClass": "com.edwardjones.database.dataproviders.platform.EjAccountsFilteredVyOwnRuleIdAndRestrictionsDb2TestDataProvider",
            "methodName": "executeQuery",
            "fileName": "EjAccountsFilteredVyOwnRuleIdAndRestrictionsDb2TestDataProvider.java",
            "lineNumber": 368
          },
          {
            "declaringClass": "com.edwardjones.database.dataproviders.platform.EjAccountsFilteredVyOwnRuleIdAndRestrictionsDb2TestDataProvider",
            "methodName": "readEjAccountsDataForOwnershipRuleIdWithNoRestrictions",
            "fileName": "EjAccountsFilteredVyOwnRuleIdAndRestrictionsDb2TestDataProvider.java",
            "lineNumber": 115
          },
          {
            "declaringClass": "com.edwardjones.database.dataproviders.platform.EjAccountsFilteredVyOwnRuleIdAndRestrictionsDb2TestDataProvider",
            "methodName": "readEjAccountsDataForOwnershipRuleIdSvcTyCdAndSvcStatCd",
            "fileName": "EjAccountsFilteredVyOwnRuleIdAndRestrictionsDb2TestDataProvider.java",
            "lineNumber": 149
          },
          {
            "declaringClass": "com.edwardjones.database.dataproviders.platform.BankProfileTestDataProvider",
            "methodName": "getAccountWithBankProfileAndEjAccountsDataForOwnershipRuleIdSvcTyCdAndSvcStatCd",
            "fileName": "BankProfileTestDataProvider.java",
            "lineNumber": 165
          },
          {
            "declaringClass": "com.edwardjones.platform_ui_tests.testcases.IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement",
            "methodName": "runTestFlow",
            "fileName": "IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement.java",
            "lineNumber": 306
          },
          {
            "declaringClass": "com.edwardjones.platform_ui_tests.testcases.IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement",
            "methodName": "verifyMissingClientAgreementTGd",
            "fileName": "IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement.java",
            "lineNumber": 266
          },
          {
            "declaringClass": "worker.org.gradle.process.internal.worker.GradleWorkerMain",
            "methodName": "run",
            "fileName": "GradleWorkerMain.java",
            "lineNumber": 69
          },
          {
            "declaringClass": "worker.org.gradle.process.internal.worker.GradleWorkerMain",
            "methodName": "main",
            "fileName": "GradleWorkerMain.java",
            "lineNumber": 74
          }
        ],
        "rootCause": {
          "errorType": "com.ibm.db2.jcc.am.DisconnectNonTransientConnectionException",
          "message": "[jcc][t4][2030][11211][4.29.24] A communication error occurred during operations on the connection\u0027s underlying socket, socket input stream, \nor socket output stream.  Error location: Query timeout check.  Message: Query timed out. ERRORCODE\u003d-4499, SQLSTATE\u003d08001",
          "stackTrace": [
            {
              "declaringClass": "com.ibm.db2.jcc.am.b7",
              "methodName": "a",
              "fileName": "b7.java",
              "lineNumber": 338
            },
            {
              "declaringClass": "com.ibm.db2.jcc.t4.a",
              "methodName": "a",
              "fileName": "a.java",
              "lineNumber": 573
            },
            {
              "declaringClass": "com.ibm.db2.jcc.t4.a",
              "methodName": "a",
              "fileName": "a.java",
              "lineNumber": 557
            },
            {
              "declaringClass": "com.ibm.db2.jcc.t4.b",
              "methodName": "l",
              "fileName": "b.java",
              "lineNumber": 7866
            },
            {
              "declaringClass": "com.ibm.db2.jcc.t4.a",
              "methodName": "y",
              "fileName": "a.java",
              "lineNumber": 1737
            },
            {
              "declaringClass": "com.ibm.db2.jcc.t4.a",
              "methodName": "a",
              "fileName": "a.java",
              "lineNumber": 1721
            },
            {
              "declaringClass": "com.ibm.db2.jcc.t4.y",
              "methodName": "b",
              "fileName": "y.java",
              "lineNumber": 276
            },
            {
              "declaringClass": "com.ibm.db2.jcc.t4.y",
              "methodName": "c",
              "fileName": "y.java",
              "lineNumber": 342
            },
            {
              "declaringClass": "com.ibm.db2.jcc.t4.y",
              "methodName": "c",
              "fileName": "y.java",
              "lineNumber": 455
            },
            {
              "declaringClass": "com.ibm.db2.jcc.t4.y",
              "methodName": "v",
              "fileName": "y.java",
              "lineNumber": 1230
            },
            {
              "declaringClass": "com.ibm.db2.jcc.t4.ab",
              "methodName": "b",
              "fileName": "ab.java",
              "lineNumber": 93
            },
            {
              "declaringClass": "com.ibm.db2.jcc.t4.p",
              "methodName": "a",
              "fileName": "p.java",
              "lineNumber": 32
            },
            {
              "declaringClass": "com.ibm.db2.jcc.t4.av",
              "methodName": "i",
              "fileName": "av.java",
              "lineNumber": 150
            },
            {
              "declaringClass": "com.ibm.db2.jcc.am.k9",
              "methodName": "al",
              "fileName": "k9.java",
              "lineNumber": 2223
            },
            {
              "declaringClass": "com.ibm.db2.jcc.am.k9",
              "methodName": "a",
              "fileName": "k9.java",
              "lineNumber": 3351
            },
            {
              "declaringClass": "com.ibm.db2.jcc.am.k9",
              "methodName": "a",
              "fileName": "k9.java",
              "lineNumber": 741
            },
            {
              "declaringClass": "com.ibm.db2.jcc.am.k9",
              "methodName": "executeQuery",
              "fileName": "k9.java",
              "lineNumber": 720
            },
            {
              "declaringClass": "com.edwardjones.database.helpers.Db2Helper",
              "methodName": "getResultSet",
              "fileName": "Db2Helper.java",
              "lineNumber": 54
            },
            {
              "declaringClass": "com.edwardjones.database.dataproviders.base.BaseTestDataProvider",
              "methodName": "readDb2Data",
              "fileName": "BaseTestDataProvider.java",
              "lineNumber": 119
            },
            {
              "declaringClass": "com.edwardjones.database.dataproviders.base.BaseTestDataProvider",
              "methodName": "readDb2Data",
              "fileName": "BaseTestDataProvider.java",
              "lineNumber": 106
            },
            {
              "declaringClass": "com.edwardjones.database.dataproviders.platform.EjAccountsFilteredVyOwnRuleIdAndRestrictionsDb2TestDataProvider",
              "methodName": "executeQuery",
              "fileName": "EjAccountsFilteredVyOwnRuleIdAndRestrictionsDb2TestDataProvider.java",
              "lineNumber": 368
            },
            {
              "declaringClass": "com.edwardjones.database.dataproviders.platform.EjAccountsFilteredVyOwnRuleIdAndRestrictionsDb2TestDataProvider",
              "methodName": "readEjAccountsDataForOwnershipRuleIdWithNoRestrictions",
              "fileName": "EjAccountsFilteredVyOwnRuleIdAndRestrictionsDb2TestDataProvider.java",
              "lineNumber": 115
            },
            {
              "declaringClass": "com.edwardjones.database.dataproviders.platform.EjAccountsFilteredVyOwnRuleIdAndRestrictionsDb2TestDataProvider",
              "methodName": "readEjAccountsDataForOwnershipRuleIdSvcTyCdAndSvcStatCd",
              "fileName": "EjAccountsFilteredVyOwnRuleIdAndRestrictionsDb2TestDataProvider.java",
              "lineNumber": 149
            },
            {
              "declaringClass": "com.edwardjones.database.dataproviders.platform.BankProfileTestDataProvider",
              "methodName": "getAccountWithBankProfileAndEjAccountsDataForOwnershipRuleIdSvcTyCdAndSvcStatCd",
              "fileName": "BankProfileTestDataProvider.java",
              "lineNumber": 165
            },
            {
              "declaringClass": "com.edwardjones.platform_ui_tests.testcases.IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement",
              "methodName": "runTestFlow",
              "fileName": "IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement.java",
              "lineNumber": 306
            },
            {
              "declaringClass": "com.edwardjones.platform_ui_tests.testcases.IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement",
              "methodName": "verifyMissingClientAgreementTGd",
              "fileName": "IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement.java",
              "lineNumber": 266
            },
            {
              "declaringClass": "worker.org.gradle.process.internal.worker.GradleWorkerMain",
              "methodName": "run",
              "fileName": "GradleWorkerMain.java",
              "lineNumber": 69
            },
            {
              "declaringClass": "worker.org.gradle.process.internal.worker.GradleWorkerMain",
              "methodName": "main",
              "fileName": "GradleWorkerMain.java",
              "lineNumber": 74
            }
          ]
        }
      },
      "result": "ERROR",
      "reportData": [
        {
          "title": "SQL query",
          "contents": "select\nacct.ACCT_ID, acct.CUST_NO,\nrlt.RLTSHP_ID AS RLTSHP_ID,\nacct_svc.ACCT_SVC_TY_CD, acct_svc.ACCT_SVC_STAT_CD, acct.ACCT_OWN_RULE_ID,\ncontact.CON_ID, contact.DEATH_DA,\nhq_system_restrictions.ACH_DB_ALLW_IND, hq_system_restrictions.ACH_CR_ALLW_IND,\nsub_acc.BR_NO,\nus_sub_acc.EDJ_ACCT_PRFD_NA as ACCT_PREFERRED_NAME\n\nfrom PROD.RLTSHP_13120 rlt\njoin PROD.ACCT_FUNC_GRP_DTL_13088 grp on rlt.ACCT_FUNC_GRP_ID \u003d grp.ACCT_FUNC_GRP_ID\njoin PROD.ACCOUNT_12280 as acct on grp.ACCT_ID \u003d acct.ACCT_ID\njoin PROD.SUB_ACCOUNT_12512 as sub_acc on sub_acc.ACCT_ID\u003dacct.ACCT_ID\njoin PROD.SUBACCT_SVC_12569 as acct_svc on acct_svc.ACCT_ID\u003dacct.ACCT_ID\njoin PROD.CONTACT_12250 as contact on contact.CON_ID  \u003d sub_acc.TAX_RPT_CON_ID\njoin PROD.US_SUB_ACCT_13603 as us_sub_acc on sub_acc.ACCT_ID \u003d us_sub_acc.ACCT_ID\nleft outer join PROD.DB_CR_ALLW_11903 as hq_system_restrictions on hq_system_restrictions.ACCT_ID \u003d acct.ACCT_ID\n\nwhere\nacct.TAX_RPT_CTRY_CD\u003d\u0027US\u0027\nand acct.ACCT_OWN_RULE_ID\u003d313\nand sub_acc.br_no   in (1626, 2153, 4369, 9005, 3434, 94674, 87782, 7822, 5897, 3997, 19864, 99785, 99732, 99464, 99447, 98594, 95528, 4454, 9979)\n\n--account is not deleted and closed\nand acct.LGCL_DEL_DA is null\nand acct.ACCT_CLS_DA is null\n--owner is not deceased\nand contact.DEATH_DA is  null\n--inherited \u003d Y\nand acct.dcdnt_retr_ind \u003d \u0027N\u0027\n\n---- Y[hqEjToBank\u003dtrue] \u003d client is allowed to initiate transfers from this Edward Jones account to their bank account\nand (hq_system_restrictions.ACH_DB_ALLW_IND is null  or hq_system_restrictions.ACH_DB_ALLW_IND\u003d\u0027Y\u0027)\n--and hq_system_restrictions.ACH_DB_ALLW_IND\u003d\u0027N\u0027\n---- Y[hqEjToBank\u003dtrue] \u003d client is allowed to initiate transfers from their bank account to this Edward Jones account\nand (hq_system_restrictions.ACH_CR_ALLW_IND is null or hq_system_restrictions.ACH_CR_ALLW_IND\u003d\u0027Y\u0027)\n--and hq_system_restrictions.ACH_CR_ALLW_IND\u003d\u0027N\u0027\n\n    and acct.AUTH_FORM_IND \u003d \u0027Y\u0027 and acct_svc.ACCT_SVC_TY_CD \u003d\u0027GD\u0027 and acct_svc.ACCT_SVC_STAT_CD \u003d \u0027T\u0027\n and acct_svc.ACCT_SVC_TY_CD not in (\u0027TL\u0027)\n\n\n--account is [not] restricted by restrictions from list\nand not acct.cust_no in (\n    select distinct acct.CUST_NO\n\n    from PROD.ACCOUNT_12280 as acct\n    join PROD.SUB_ACCOUNT_12512 as sub_acc on sub_acc.ACCT_ID\u003dacct.ACCT_ID\n    left outer join PROD.acct_rst_10214 v on v.account_no\u003dacct.cust_no\n\n    where\n    acct.TAX_RPT_CTRY_CD\u003d\u0027US\u0027\n\n    and acct.ACCT_OWN_RULE_ID\u003d313\n    and sub_acc.br_no   in (1626, 2153, 4369, 9005, 3434, 94674, 87782, 7822, 5897, 3997, 19864, 99785, 99732, 99464, 99447, 98594, 95528, 4454, 9979)\n    and acct.LGCL_DEL_DA is null\n    and acct.ACCT_CLS_DA is null\n    and v.rst_rsn_cd in (\u0027CIPR\u0027,\u0027COPD\u0027,\u0027FTRN\u0027,\u0027MAIL\u0027,\u0027RISK\u0027,\u0027WARN\u0027,\u002772T\u0027,\u0027SSN\u0027,\u0027AUTH\u0027,\u0027RESTRICTION\u0027)\n    and v.RST_START_DA\u003c\u00272025-10-06\u0027\n)",
          "isEvidence": false,
          "id": "report-data-a6949d6a-5902-461d-aa28-88ec0095e467"
        },
        {
          "title": "SQL query for AMC_PROFILE",
          "contents": "SELECT bank_account.bank_account_no, bank_profile.account_id, bank_account.bank_account_guid FROM bank_profile join bank_account on bank_account.bank_account_id \u003d bank_profile.bank_account_id WHERE bank_profile.bank_profile_status_cd\u003d\u0027APPROVED\u0027 and bank_profile.account_id in ()",
          "isEvidence": false,
          "id": "report-data-05a9098e-50c1-469d-bef7-051d61290998"
        }
      ],
      "precondition": false,
      "level": 0
    },
    {
      "number": 2,
      "description": "Get account with bank profile and ej accounts data for ownership rule id svc ty cd and svc stat cd: \u003cnull\u003e, 313, GD, T",
      "duration": 2,
      "startTime": "2025-10-06T10:34:27.483547711-05:00[America/Chicago]",
      "result": "ERROR",
      "precondition": false,
      "level": 0
    },
    {
      "number": 3,
      "description": "Prepare approved bank profile if any approved bank profiles found",
      "duration": 0,
      "startTime": "2025-10-06T10:34:27.489043291-05:00[America/Chicago]",
      "result": "SKIPPED",
      "reportData": [
        {
          "title": "...qTest Listener disabled",
          "contents": "Listener disabled or Serenity \u0027Result\u0027 is \u0027IGNORED\u0027 or Test Suite is invalid",
          "isEvidence": false,
          "id": "report-data-4b17011b-5b54-4d1f-8fb4-b8a55a38ae69"
        },
        {
          "title": "Error submitting test results. INFO only",
          "contents": "closed",
          "isEvidence": false,
          "id": "report-data-9ffceaff-5943-43dc-a4e7-b182ab826e02"
        }
      ],
      "precondition": false,
      "level": 0
    }
  ],
  "userStory": {
    "id": "com.edwardjones.platform_ui_tests.testcases.IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement",
    "storyName": "IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement",
    "displayName": "IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement",
    "storyClassName": "com.edwardjones.platform_ui_tests.testcases.IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement",
    "path": "com.edwardjones.platform_ui_tests.testcases.IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement",
    "pathElements": [
      {
        "name": "com",
        "description": "com"
      },
      {
        "name": "edwardjones",
        "description": "edwardjones"
      },
      {
        "name": "platform_ui_tests",
        "description": "platform_ui_tests"
      },
      {
        "name": "testcases",
        "description": "testcases"
      },
      {
        "name": "IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement",
        "description": "IntoLinkedBankLimitationsEDJAccountsMissingClientAgreement"
      }
    ],
    "narrative": "",
    "type": "feature"
  },
  "title": "\u0027Into\u0027 EJ Account transfer: Verify Account with ACCT_SVC_STAT_CD \u003d \u0027T\u0027 ACCT_SVC_TY_CD \u003d \u0027GD\u0027",
  "coreIssues": [
    "ATMT-18342",
    "ATMT-23446",
    "ATMT-25307",
    "ATMT-31453"
  ],
  "tags": [
    {
      "name": "Priority-3c",
      "type": "tag",
      "displayName": "Priority-3c"
    },
    {
      "name": "Microsoftedge",
      "type": "context",
      "displayName": "Microsoftedge"
    },
    {
      "name": "DB-test-data",
      "type": "tag",
      "displayName": "DB-test-data"
    },
    {
      "name": "Platform1-Regression",
      "type": "tag",
      "displayName": "Platform1-Regression"
    },
    {
      "name": "new-old-ui",
      "type": "tag",
      "displayName": "new-old-ui"
    }
  ],
  "startTime": "2025-10-06T10:33:22.179413518-05:00[America/Chicago]",
  "endTime": "2025-10-06T10:34:27.490907515-05:00[America/Chicago]",
  "duration": 65311,
  "testFailureCause": {
    "errorType": "net.thucydides.model.domain.MultipleAssertionErrors",
    "message": "\nThe following 2 assertions failed:\n1) Error in reading data from DB2\n2) Cannot invoke \"com.edwardjones.database.domain.testdata.EjAccountWithBankProfileTestData.getBranch()\" because \"testData\" is null\n",
    "stackTrace": [
      {
        "declaringClass": "worker.org.gradle.process.internal.worker.GradleWorkerMain",
        "methodName": "run",
        "fileName": "GradleWorkerMain.java",
        "lineNumber": 69
      },
      {
        "declaringClass": "worker.org.gradle.process.internal.worker.GradleWorkerMain",
        "methodName": "main",
        "fileName": "GradleWorkerMain.java",
        "lineNumber": 74
      }
    ]
  },
  "testFailureClassname": "net.thucydides.model.domain.MultipleAssertionErrors",
  "testFailureMessage": "\nThe following 2 assertions failed:\n1) Error in reading data from DB2\n2) Cannot invoke \"com.edwardjones.database.domain.testdata.EjAccountWithBankProfileTestData.getBranch()\" because \"testData\" is null\n",
  "testFailureSummary": "\nThe following 2 assertions failed:\n1) Error in reading data from DB2\n2) Cannot invoke \"com.edwardjones.database.domain.testdata.EjAccountWithBankProfileTestData.getBranch()\" because \"testData\" is null\n",
  "projectKey": "",
  "annotatedResult": "ERROR",
  "sessionId": "ec4a53b4d84342ab8a20edaa64c4c0bf",
  "driver": "remote",
  "isManualTestingUpToDate": false,
  "context": "microsoftedge",
  "manual": false,
  "testSource": "JUnit5",
  "order": 0,
  "result": "ERROR",
  "issues": [
    "ATMT-18342",
    "ATMT-23446",
    "ATMT-25307",
    "ATMT-31453"
  ],
  "scenarioOutline": ""
}